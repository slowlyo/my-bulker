---
type: "always_apply"
---

# Common Standards

> 注意：这是唯一的公共规范文档，所有公共相关的规范都应该在这里维护，不允许创建新的规则文件。

## 项目概述

这是一个多数据库批量 SQL 执行和模式同步工具，支持多种数据库类型，提供批量 SQL 执行和数据库模式同步功能。

## 环境要求

### 后端环境
- Go 1.21 或更高版本
- Make 工具

### 前端环境
- Node.js 16 或更高版本
- pnpm 包管理器

## 项目结构

```
.
├── internal/           # 后端内部包
│   ├── bootstrap/     # 应用初始化
│   ├── handler/       # HTTP 处理器
│   ├── middleware/    # 中间件
│   ├── model/        # 数据模型
│   ├── pkg/          # 内部工具包
│   ├── router/       # 路由注册
│   └── service/      # 业务逻辑
├── ui/               # 前端项目
│   ├── src/         # 源代码
│   │   ├── components/  # 组件
│   │   ├── pages/      # 页面
│   │   ├── services/   # API 服务
│   │   ├── utils/      # 工具函数
│   │   └── types/      # 类型定义
│   ├── .umirc.ts    # UmiJS 配置
│   ├── package.json # 依赖配置
│   └── tsconfig.json # TypeScript 配置
├── build/            # 构建产物目录
├── main.go          # 应用入口
├── Makefile         # 构建脚本
└── README.md        # 项目文档
```

## 开发流程

1. 代码管理
   - 使用 Git 进行版本控制
   - 遵循 Git Flow 工作流
   - 保持提交信息清晰
   - 定期同步主分支

2. 代码审查
   - 提交前进行自测
   - 使用代码审查工具
   - 遵循代码规范
   - 保持代码质量

3. 测试要求
   - 编写单元测试
   - 进行集成测试
   - 执行性能测试
   - 保持测试覆盖率

4. 文档维护
   - 及时更新文档
   - 保持文档准确性
   - 使用 Markdown 格式
   - 添加必要的注释

5. 程序运行规范
   - 不要尝试运行用户的程序
   - 不要运行/编译用户的程序
   - 只进行代码编译检查
   - 专注于代码实现和问题解决
   - 避免执行可能影响系统的操作
   - 记录所有代码变更，不执行实际运行

## 构建和部署

### 构建命令

```bash
# 安装后端依赖
make tidy

# 安装前端依赖
cd ui && pnpm install

# 构建后端
make build

# 构建前端
make build-ui

# 清理构建产物
make clean
```

### 运行命令

```bash
# 运行后端服务
make run

# 运行前端开发服务
make run-ui
```

## 开发工具

### 推荐工具
- IDE：Cursor IDE
- 版本控制：Git
- 包管理：pnpm (前端)
- 构建工具：Make

### 开发环境
- 操作系统：Linux/macOS/Windows
- 终端：支持 Make 命令
- 浏览器：Chrome/Firefox
- 数据库：SQLite

## 代码规范

### 通用规范
- 使用有意义的命名
- 保持代码简洁
- 添加必要注释
- 遵循最佳实践

### 文档规范
- 使用 Markdown 格式
- 保持文档更新
- 添加示例代码
- 说明使用场景

### 注释规范
- 使用清晰的注释
- 说明复杂逻辑
- 标注重要信息
- 保持注释更新

## 安全规范

### 数据安全
- 加密敏感信息
- 保护用户数据
- 实现访问控制
- 定期安全审计

### 代码安全
- 防止注入攻击
- 验证输入数据
- 使用安全依赖
- 及时更新依赖

## 性能规范

### 优化目标
- 响应时间 < 200ms
- CPU 使用率 < 50%
- 内存使用 < 1GB
- 并发支持 > 100

### 监控指标
- 响应时间
- 错误率
- 资源使用
- 并发数

## 维护规范

### 日常维护
- 定期更新依赖
- 检查错误日志
- 监控系统状态
- 备份重要数据

### 问题处理
- 记录问题详情
- 分析根本原因
- 制定解决方案
- 防止问题复发
